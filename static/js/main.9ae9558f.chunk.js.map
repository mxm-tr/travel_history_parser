{"version":3,"sources":["date_window.js","utils.js","result.js","timeline.js","icons.js","travel_checks.js","input_form_dialog.js","tooltips.js","index.js"],"names":["TabPanel","props","children","value","index","other","Typography","component","role","hidden","id","aria-labelledby","Box","p","a11yProps","DateWindow","state","tabValue","handleTabChange","bind","selectYear","event","newValue","this","setState","handleWindowStartChange","dateWindowStart","handleWindowStopChange","dateWindowStop","moment","_d","newDate","Date","getFullYear","classes","Grid","item","xs","utils","DateFnsUtils","AppBar","position","Toolbar","variant","className","title","aria-label","Tabs","onChange","Tab","label","Card","root","CardContent","DatePicker","format","newD","color","views","Button","onClick","fitDateWindow","size","React","Component","travelTypes","sortTravelChecks","travelChecks","newList","Array","from","sort","a","b","date","sumTravelDaysInside","travelsList","selectedTravels","filter","t","length","map","reduce","dateStringToDate","dateStr","undefined","dateToDateString","computeTravelDurationDays","dateStart","dateStop","dateStartD","dateStopD","dateWindowStartD","dateWindowStopD","Math","abs","diff","min","max","exportXls","columns","csvData","wb","Sheets","XLSX","json_to_sheet","SheetNames","excelBuffer","write","bookType","type","data","Blob","FileSaver","saveAs","fileName","useStyles","makeStyles","chip","margin","errorMessage","fontSize","renderTravelCheck","tc","Chip","icon","location","renderParsingErrors","errors","List","m","i","e","separator","gutterBottom","ListItem","key","ListItemIcon","message","renderParsingError","Divider","ParsingErrors","Result","content","TableContainer","Paper","Table","table","TableBody","TableRow","TableCell","scope","align","totalDaysInside","totalDaysOutside","totalDaysWindow","totalErrors","TravelsTimeline","timelineRef","createRef","current","fit","timelineOptions","width","stack","showMajorLabels","showCurrentTime","zoomMin","minorLabels","minute","hour","template","element","travelCheck","start","end","ReactDOM","createPortal","render","window","timeline","redraw","timeWindowBackground","travels","travelChecksPoints","check","group","options","ref","groups","items","concat","PureComponent","tableIcons","Add","forwardRef","Check","Clear","Delete","DetailPanel","Edit","Export","Filter","FirstPage","LastPage","NextPage","PreviousPage","ResetSearch","Search","SortArrow","ThirdStateCheck","ViewColumn","blueBackground","background","border","borderRadius","boxShadow","height","padding","alignItems","TravelChecksList","icons","field","filtering","lookup","style","search","exportButton","exportAllData","exportCsv","localization","exportName","searchFieldStyle","backgroundColor","rowStyle","rowData","tableData","editable","onRowAdd","newData","Promise","resolve","setTimeout","updateTravelChecks","onRowUpdate","oldData","newTravelChecks","indexOf","onRowDelete","splice","InputFormDialog","Dialog","open","showModal","onClose","hideModalHandler","DialogTitle","DialogContent","container","TextField","autoFocus","multiline","rows","fullWidth","name","newRawInput","handleNewRawInput","Select","processingFunction","handleProcessingFunctionChange","MenuItem","processingFunctionInfo","handleProcessNewRawInput","DialogActions","HowToUse","useState","setOpen","setScroll","handleClickOpen","scrollType","ExpansionPanel","ExpansionPanelSummary","expandIcon","aria-controls","ExpansionPanelDetails","InfoDialog","handleClose","descriptionElementRef","useRef","useEffect","descriptionElement","focus","scroll","aria-describedby","dividers","DialogContentText","tabIndex","href","rel","target","processingFunctionInfos","App","showModalHandler","newTravelChecksCount","showImportingDataMessage","showClearAllDialog","showDataImportedMessage","showNoDataImportedMessage","rawInput","s","results","parsedOutput","match","push","pop","trim","console","error","isValid","processRawInput","preventDefault","updateTravels","newTravelChecksSorted","reverse","unshift","isAdditionalDateWindowStopCheck","isAdditionalDateWindowStartCheck","checkA","checkB","travelTitle","travelDurationDateWindow","travelDurationNoDateWindow","newTravel","duration","durationDateWindow","travelChecksToTravelsList","computeTravelsWithMessage","travelsComputeResult","travelsParserErrors","addEventListener","handleLeavePage","removeEventListener","confirmationMessage","returnValue","justify","Snackbar","autoHideDuration","Alert","spacing","direction","marginTop","marginBottom","noWrap","computeTravelsMessage","startIcon","computeTravels","document","getElementById"],"mappings":"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","file":"static/js/main.9ae9558f.chunk.js","sourcesContent":["import React from 'react';\r\nimport { DatePicker } from \"@material-ui/pickers\";\r\nimport Grid from '@material-ui/core/Grid';\r\nimport { MuiPickersUtilsProvider } from '@material-ui/pickers';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport DateFnsUtils from '@date-io/date-fns';\r\nimport moment from 'moment';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport Box from '@material-ui/core/Box';\r\nimport Button from '@material-ui/core/Button';\r\n\r\nfunction TabPanel(props) {\r\n  const { children, value, index, ...other } = props;\r\n\r\n  return (\r\n    <Typography\r\n      component=\"div\"\r\n      role=\"tabpanel\"\r\n      hidden={value !== index}\r\n      id={`scrollable-force-tabpanel-${index}`}\r\n      aria-labelledby={`scrollable-force-tab-${index}`}\r\n      {...other}\r\n    >\r\n      {value === index && <Box p={3}>{children}</Box>}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nfunction a11yProps(index) {\r\n  return {\r\n    id: `scrollable-force-tab-${index}`,\r\n    'aria-controls': `scrollable-force-tabpanel-${index}`,\r\n  };\r\n}\r\n\r\n\r\nexport class DateWindow extends React.Component {\r\n  constructor(props){\r\n    super(props);\r\n    this.state = { tabValue: 0 }\r\n    this.handleTabChange = this.handleTabChange.bind(this)\r\n    this.selectYear = this.selectYear.bind(this)\r\n  };\r\n  handleTabChange(event, newValue){\r\n    this.setState({ tabValue: newValue })\r\n\r\n    // According to the tab we change to, update the selected window\r\n    switch (newValue) {\r\n      case 0: //Selected tab: custom dates\r\n        this.props.handleWindowStartChange(this.props.dateWindowStart)\r\n        this.props.handleWindowStopChange(this.props.dateWindowStop)\r\n        break;\r\n      case 1: //Selected tab: full year dates\r\n        this.selectYear(moment(this.props.dateWindowStart)._d)\r\n        break;\r\n      case 2: //Selected tab: whole travel interval\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n  selectYear(newDate){\r\n    this.props.handleWindowStartChange(moment(new Date(\"01/01/\" + newDate.getFullYear())));\r\n    this.props.handleWindowStopChange(moment(new Date(\"12/31/\" + newDate.getFullYear())));\r\n  }\r\n  render () { \r\n    const classes = this.props;\r\n    return (\r\n    <Grid item xs={12} >\r\n        {/* <MuiPickersUtilsProvider utils={DateFnsUtilsUS} locale='us'> */}\r\n        <MuiPickersUtilsProvider utils={DateFnsUtils}>\r\n          <AppBar position=\"static\">\r\n            <Toolbar>\r\n              <Typography variant=\"h6\" className={classes.title}>\r\n              <span role=\"img\" aria-label=\"tooltip-calendar-title\">📅</span> Select counting period\r\n              </Typography>\r\n            </Toolbar>\r\n              <Tabs value={this.state.tabValue} onChange={this.handleTabChange} aria-label=\"Counting period\">\r\n                  <Tab label=\"Custom dates\" {...a11yProps(0)} />\r\n                  <Tab label=\"One Year\" {...a11yProps(1)} />\r\n                  <Tab label=\"Whole travel history\" {...a11yProps(2)} />\r\n              </Tabs>\r\n            </AppBar>\r\n          <Card className={classes.root}>\r\n          <CardContent>\r\n            <TabPanel value={this.state.tabValue} index={0}>\r\n              <Typography className={classes.title} component=\"h1\">\r\n                Count travel days on a specific period\r\n              </Typography>\r\n              <DatePicker\r\n                  variant=\"dialog\"\r\n                  id=\"dateWindowStart\"\r\n                  label=\"From\"\r\n                  format='yyyy-MM-dd'\r\n                  value={this.props.dateWindowStart}\r\n                  onChange={ (newD) => this.props.handleWindowStartChange(moment(newD)) }\r\n              />\r\n              <DatePicker\r\n                      variant=\"dialog\"\r\n                      id=\"dateWindowStop\"\r\n                      label=\"To\"\r\n                      format='yyyy-MM-dd'\r\n                      value={this.props.dateWindowStop}\r\n                      onChange={ (newD) => this.props.handleWindowStopChange(moment(newD)) }\r\n              />\r\n              <Typography component=\"p\" color=\"textSecondary\">\r\n                  The total of days will be counted between the given dates.\r\n              </Typography>\r\n            </TabPanel>\r\n            <TabPanel value={this.state.tabValue} index={1}>\r\n              <Typography className={classes.title} component=\"h1\">\r\n                Count travel days in a full year\r\n              </Typography>\r\n              <DatePicker\r\n                views={[\"year\"]}\r\n                label=\"Year long period\"\r\n                value={this.props.dateWindowStart}\r\n                onChange={ this.selectYear }\r\n                />\r\n              <Typography component=\"p\" color=\"textSecondary\">\r\n                  The total of days will be counted for the given year.\r\n              </Typography>\r\n            </TabPanel>\r\n            <TabPanel value={this.state.tabValue} index={2}>\r\n              <Box>\r\n                <Button\r\n                  onClick={ this.props.fitDateWindow }\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  size=\"medium\">\r\n                      Select whole travel history\r\n                </Button>\r\n              </Box>\r\n              <Typography component=\"p\" color=\"textSecondary\">\r\n                  The total of days will be counted for the whole travel history list.\r\n              </Typography>\r\n            </TabPanel>\r\n          </CardContent>\r\n        </Card>\r\n      </MuiPickersUtilsProvider>\r\n    </Grid>\r\n  )}\r\n}\r\n","import moment from 'moment';\r\nimport XLSX from 'xlsx';\r\nimport FileSaver from 'file-saver';\r\n\r\nexport const travelTypes = {\r\n    'Outside': 2,\r\n    'Inside': 1\r\n}\r\n\r\nexport function sortTravelChecks(travelChecks){\r\n    let newList = Array.from(travelChecks)\r\n    newList.sort((a,b) => moment(a.date) - moment(b.date))\r\n    return newList\r\n}\r\n\r\nexport function sumTravelDaysInside(travelsList){\r\n\r\n    const selectedTravels = travelsList.filter((t) => t['group'] === travelTypes[\"Inside\"])\r\n\r\n    if (selectedTravels.length < 1){\r\n        return 0\r\n    }\r\n\r\n     return selectedTravels.map((t) => t['durationDateWindow']).reduce((a,b) => a + b, 0)\r\n}\r\n\r\nexport function processRawInput(rawInput, processingFunction){\r\n    let results = []\r\n    let parsedOutput = []\r\n\r\n    switch(processingFunction){\r\n        case 'i94':\r\n            parsedOutput = rawInput.match(/((\\S+){3})/g);\r\n\r\n            // Remove unwanted keywords if any\r\n            parsedOutput.splice(parsedOutput.indexOf(\"Date\"), 1)\r\n            parsedOutput.splice(parsedOutput.indexOf(\"Type\"), 1)\r\n            parsedOutput.splice(parsedOutput.indexOf(\"Location\"), 1)\r\n\r\n            function departureOrArrivalI94(s){\r\n                return s === 'Departure' ? 'DEP' : (s === 'Arrival' ? 'ARR' : null)\r\n            }\r\n            while (parsedOutput.length > 0) {\r\n                results.push({\r\n                    location: parsedOutput.pop(),\r\n                    type: departureOrArrivalI94(parsedOutput.pop()),\r\n                    date: parsedOutput.pop()\r\n                });\r\n            }\r\n        break;\r\n        case 'tabular':\r\n            parsedOutput = rawInput.match(/[\\S ]+/g).map((a) => a.trim()).filter((a) => a.length > 0);\r\n            // Remove unwanted keywords if any\r\n            parsedOutput.splice(parsedOutput.indexOf(\"date\"), 1)\r\n            parsedOutput.splice(parsedOutput.indexOf(\"type\"), 1)\r\n            parsedOutput.splice(parsedOutput.indexOf(\"location\"), 1)\r\n            parsedOutput.splice(parsedOutput.indexOf(\"tableData\"), 1)\r\n            // console.log(parsedOutput);\r\n\r\n            while (parsedOutput.length > 0) {\r\n                results.push({\r\n                    type: parsedOutput.pop(),\r\n                    location: parsedOutput.pop(),\r\n                    date: parsedOutput.pop(),\r\n                });\r\n            }\r\n        break;\r\n        default:\r\n            console.error('No processing function found.')\r\n    }\r\n\r\n    // Filter and only keep valid items\r\n    // console.log(results.map( (tc) => moment(tc[\"date\"], 'YYYY-MM-DD').isValid() ? 'ok' : tc[\"date\"]  ));\r\n    results = results.filter( (tc) => (tc[\"type\"] === 'DEP' || tc[\"type\"] === 'ARR') & moment(tc[\"date\"]).isValid() )\r\n\r\n    // Format the dates\r\n    return results.map((tc) => {\r\n        return {\r\n            date: dateToDateString(moment(tc[\"date\"])),\r\n            location: tc[\"location\"],\r\n            type: tc[\"type\"]\r\n        }\r\n    })\r\n}\r\n\r\nexport function dateStringToDate(dateStr){\r\n    if(dateStr === undefined){\r\n        return undefined\r\n    }\r\n    return new moment(dateStr);\r\n}\r\n\r\nexport function dateToDateString(date){\r\n    return moment(date).format('YYYY-MM-DD')\r\n}\r\n\r\nexport function computeTravelDurationDays(dateStart, dateStop, dateWindowStart, dateWindowStop){\r\n    const dateStartD = dateStringToDate(dateStart)\r\n    const dateStopD = dateStringToDate(dateStop)\r\n    const dateWindowStartD = dateStringToDate(dateWindowStart)\r\n    const dateWindowStopD = dateStringToDate(dateWindowStop)\r\n\r\n    if (dateWindowStart === undefined || dateWindowStop === undefined){\r\n        return Math.abs(dateStopD.diff(dateStartD, 'days')) + 1\r\n    }\r\n    if(dateStartD >= dateWindowStopD || dateStopD <= dateWindowStartD){\r\n        return 0\r\n    }\r\n\r\n    return moment.min(dateWindowStopD, dateStopD).diff(moment.max(dateWindowStartD, dateStartD), 'days') + 1\r\n}\r\n\r\nexport function travelChecksToTravelsList(travelChecks, dateWindowStart, dateWindowStop){\r\n    // travelChecks looks like\r\n    // { location: 'JFK', type: 'DEP' or 'ARR', date: '2020-03-20'\r\n    // Returns something like\r\n    // { id: 1, type: \"point\", title: \"loul\", content: \"Departure from JFK\", start: new Date(2013, 5, 20) }\r\n\r\n    if(travelChecks.length < 1){\r\n        return {travels: [], message: 'No travel checks yet'}\r\n    }\r\n\r\n    // Sort the travel check by date\r\n    let newTravelChecks = sortTravelChecks(travelChecks).reverse()\r\n    let travels = []\r\n\r\n    // Add the time window start and stop as travel checks if they are outside the travels\r\n    if(new Date(dateWindowStop) > new Date(newTravelChecks[0].date)){\r\n\r\n        newTravelChecks.unshift({\r\n            location: newTravelChecks[0].type === 'DEP' ? 'USA' : 'Abroad',\r\n            type: newTravelChecks[0].type === 'DEP' ? 'ARR' : 'DEP',\r\n            date: dateWindowStop,\r\n            isAdditionalDateWindowStopCheck: true\r\n        })\r\n    }\r\n    if(new Date(dateWindowStart) < new Date(newTravelChecks[newTravelChecks.length - 1].date)){\r\n        newTravelChecks.push({\r\n            location: newTravelChecks[newTravelChecks.length - 1].type === 'DEP' ? 'USA' : 'Abroad',\r\n            type: newTravelChecks[newTravelChecks.length - 1].type === 'DEP' ? 'ARR' : 'DEP',\r\n            date: dateWindowStart,\r\n            isAdditionalDateWindowStartCheck: true\r\n        })\r\n    }\r\n\r\n    // Browse the list, element by element\r\n    let newTravel = {}\r\n    let checkA, checkB, travelTitle, travelDurationDateWindow, travelDurationNoDateWindow\r\n    let index = 0\r\n    let errors = []\r\n    while(newTravelChecks.length > 1){\r\n        checkA = newTravelChecks.pop(0)\r\n        checkB = newTravelChecks[newTravelChecks.length - 1]\r\n\r\n        travelDurationDateWindow = computeTravelDurationDays(checkA.date, checkB.date, dateWindowStart, dateWindowStop)\r\n        travelDurationNoDateWindow = computeTravelDurationDays(checkA.date, checkB.date)\r\n\r\n        // Build the travel title\r\n        travelTitle = `From ${checkA['location']} to ${checkB['location']}: ${travelDurationDateWindow} days`\r\n        if (travelDurationNoDateWindow - travelDurationDateWindow > 0){\r\n            travelTitle = `${travelTitle} (${travelDurationNoDateWindow - travelDurationDateWindow} days outside selected period)`\r\n        }\r\n\r\n        // Create a new travel object\r\n        newTravel = {\r\n            id: index,\r\n            type: \"range\",\r\n            title: travelTitle,\r\n            content: `From ${checkA['location']} to ${checkB['location']}: ${travelDurationDateWindow} days`,\r\n            start: checkA.date,\r\n            end: checkB.date,\r\n            duration: travelDurationNoDateWindow,\r\n            durationDateWindow: travelDurationDateWindow\r\n        }\r\n\r\n        if (checkA.type === 'DEP' && checkB.type === 'ARR') {\r\n            index++\r\n            newTravel['group'] = travelTypes['Outside'] // Outside\r\n            travels.push(newTravel)\r\n        }else if(checkA.type === 'ARR' && checkB.type === 'DEP'){\r\n            index++\r\n            newTravel['group'] = travelTypes[\"Inside\"] // Inside\r\n            travels.push(newTravel)\r\n        }else{\r\n            errors.push({\r\n                travelChecks: [checkA, checkB],\r\n                message: `should be consecutive Arrivals and Departures`\r\n            })\r\n        }\r\n    }\r\n\r\n    return {travels: travels, errors: errors}\r\n\r\n}\r\n\r\nexport function exportXls(columns, csvData){\r\n    // Used here:\r\n    // https://github.com/mbrn/material-table/blob/3499b134c2b2ac08b54cfec4fe6bc406108beac1/src/components/m-table-toolbar.js#L50\r\n    const fileType = 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8';\r\n    const fileName = 'dataExport';\r\n    const fileExtension = '.xlsx';\r\n    const ws = XLSX.utils.json_to_sheet(csvData);\r\n    const wb = { Sheets: { 'data': ws }, SheetNames: ['data'] };\r\n    const excelBuffer = XLSX.write(wb, { bookType: 'xlsx', type: 'array' });\r\n    const data = new Blob([excelBuffer], {type: fileType});\r\n    FileSaver.saveAs(data, fileName + fileExtension);\r\n}\r\n","import React from 'react';\r\nimport Box from '@material-ui/core/Box';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport List from '@material-ui/core/List';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ReactJoin from 'react-join'\r\nimport ErrorIcon from '@material-ui/icons/Error';\r\nimport ArrowUpward from '@material-ui/icons/ArrowUpward';\r\nimport ArrowDownward from '@material-ui/icons/ArrowDownward';\r\nimport Chip from '@material-ui/core/Chip';\r\n\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Paper from '@material-ui/core/Paper';\r\n\r\n\r\nimport { makeStyles } from '@material-ui/styles';\r\nimport { dateToDateString } from './utils';\r\n\r\nconst useStyles = makeStyles(() => ({\r\n    chip: {\r\n      margin: '0px 5px 0px 5px',\r\n    },\r\n    errorMessage:{\r\n      fontSize: '0.8rem',\r\n    }\r\n}));\r\n\r\nexport function renderTravelCheck(tc, classes){\r\n  return(\r\n    <Chip\r\n      icon={ tc.type === 'DEP' ? <ArrowUpward/> : <ArrowDownward />}\r\n      className={ classes ? classes.chip : \"\" }\r\n      label={ `${ dateToDateString(tc.date) } : ${tc.location}` } />\r\n  )\r\n}\r\n\r\nfunction renderParsingError(e, index, classes){\r\n  const separator=\r\n  <Typography className={classes.errorMessage} color=\"textPrimary\" gutterBottom>\r\n    and\r\n  </Typography>\r\n\r\n  return(\r\n    <ListItem key={ index }>\r\n        <ListItemIcon>\r\n          <ErrorIcon />\r\n        </ListItemIcon>\r\n        <ReactJoin separator={separator}>\r\n          { e.travelChecks.map((tc) => renderTravelCheck(tc, classes)) }\r\n        </ReactJoin>\r\n        <Typography className={classes.errorMessage} color=\"textPrimary\" gutterBottom>\r\n        { e.message }\r\n        </Typography>\r\n    </ListItem >\r\n  )\r\n}\r\n\r\nfunction renderParsingErrors(errors, classes){\r\n  return(\r\n    <List variant=\"body2\" >\r\n      {errors.map((m, i) => renderParsingError(m, i, classes))}\r\n      <Divider/>\r\n    </List >\r\n  )\r\n}\r\n\r\nexport function ParsingErrors(props) {\r\n    const classes = useStyles(props);\r\n    if (props.errors === undefined){\r\n      return ''\r\n    }\r\n    if (props.errors.length < 1){\r\n      return ''\r\n    }\r\n    return (\r\n  <Grid item xs={12} >\r\n  <Box>\r\n      <AppBar position=\"static\">\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Errors\r\n            </Typography>\r\n          </Toolbar>\r\n      </AppBar>\r\n      <Card className={classes.root}>\r\n                { renderParsingErrors(props.errors, classes) }\r\n      </Card>\r\n  </Box>\r\n  </Grid>\r\n  )\r\n}\r\n\r\nexport function Result(props) {\r\n  const classes = useStyles(props);\r\n  let content = \r\n  <CardContent>\r\n    <TableContainer component={Paper}>\r\n      <Table className={classes.table} aria-label=\"simple table\">\r\n        <TableBody>\r\n            <TableRow key=\"inside-count\">\r\n              <TableCell component=\"th\" scope=\"row\">\r\n                Total days inside the US:\r\n              </TableCell>\r\n              <TableCell/>\r\n              <TableCell align=\"right\">{props.totalDaysInside}</TableCell>\r\n            </TableRow>\r\n            <TableRow key=\"outside-count\">\r\n              <TableCell component=\"th\" scope=\"row\">\r\n                Total days outside the US:\r\n              </TableCell>\r\n              <TableCell/>\r\n              <TableCell align=\"right\">{props.totalDaysOutside}</TableCell>\r\n            </TableRow>\r\n            <TableRow key=\"window-count\">\r\n              <TableCell component=\"th\" scope=\"row\">\r\n                Total days in window:\r\n              </TableCell>\r\n              <TableCell/>\r\n              <TableCell align=\"right\">{props.totalDaysWindow}</TableCell>\r\n            </TableRow>\r\n            <TableRow key=\"window-period\">\r\n              <TableCell component=\"th\" scope=\"row\">\r\n                Selected period\r\n              </TableCell>\r\n              <TableCell align=\"left\">\r\n              From { dateToDateString(props.dateWindowStart) }\r\n              </TableCell>\r\n              <TableCell align=\"left\">\r\n              To { dateToDateString(props.dateWindowStop) }\r\n              </TableCell>\r\n            </TableRow>\r\n        </TableBody>\r\n      </Table>\r\n    </TableContainer>\r\n  </CardContent>\r\n\r\n  if (props.errors !== undefined) {\r\n    if (props.errors.length > 0){\r\n      content = \r\n      <CardContent>\r\n        <Typography className={classes.title} color=\"textSecondary\" gutterBottom>\r\n            Unable to calculate a result, please fix the { props.totalErrors } errors and try again.\r\n        </Typography>\r\n      </CardContent>\r\n    }\r\n  }\r\n\r\n  return (\r\n  <Grid item xs={12} >\r\n  <Box>\r\n      <AppBar position=\"static\">\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              <span role=\"img\" aria-label=\"tooltip-calc-title\">🧮</span> Results\r\n            </Typography>\r\n          </Toolbar>\r\n      </AppBar>\r\n      <Card className={classes.root}>\r\n        {content}\r\n      </Card>\r\n  </Box>\r\n  </Grid>\r\n  )\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Timeline from 'react-visjs-timeline';\r\nimport './timeline.css'\r\n\r\nimport Typography from '@material-ui/core/Typography';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport { renderTravelCheck } from './result';\r\n\r\nimport { dateToDateString } from './utils.js'\r\n\r\n\r\nclass TravelsTimeline extends React.PureComponent {\r\n    // http://visjs.org/docs/timeline/#Configuration_Options\r\n    constructor(props) {\r\n        super(props);\r\n        this.timelineRef = React.createRef();  \r\n    }\r\n    componentDidUpdate(){\r\n        // Adapt zoom to fit all travels in view\r\n        if (this.timelineRef.current){\r\n            this.timelineRef.current[\"$el\"].fit()\r\n        }\r\n    }\r\n    render(){\r\n        const classes = this.props;\r\n        const timelineOptions = {\r\n            width: '100%',\r\n            //height: '160px',\r\n            stack: true,\r\n            showMajorLabels: true,\r\n            showCurrentTime: false,\r\n            zoomMin: 1000000,\r\n            type: 'background',\r\n            format: {\r\n                minorLabels: {\r\n                    minute: 'h:mma',\r\n                    hour: 'ha'\r\n                }\r\n            },\r\n            template: function (item, element, data) {\r\n                let content = \"\"\r\n                if(item.travelCheck === undefined){\r\n                    if(item.type === \"background\"){\r\n                        content = \"Selected period\"\r\n                    }else{\r\n                        content = `From ${ dateToDateString(data.start) } to ${ dateToDateString(data.end) }`\r\n                    }\r\n                    return content \r\n                }else{\r\n                    // Should be simply this:\r\n                    // return ReactDOM.render(<div>{renderTravelCheck(item.travelCheck)}</div>, element);\r\n                    // But a bug occurs, workaround from https://github.com/almende/vis/issues/3592#issuecomment-422493078\r\n                    return ReactDOM.createPortal(\r\n                        ReactDOM.render(<div>{renderTravelCheck(item.travelCheck)}</div>, element ),\r\n                        element, () => { window.timeline.redraw()} );\r\n                }\r\n            }\r\n            // locale: 'en_US'\r\n        }\r\n        const timelineGroups = [{id: 2, content: 'Outside the US'}, {id: 1, content: 'Inside the US'}, {id: 3, content: 'Checks'}]\r\n\r\n        // Set up the time window background\r\n        const timeWindowBackground = {\r\n            id: this.props.travels.length + 1,\r\n            type: \"background\",\r\n            // start: new Intl.DateTimeFormat(\"en-US\").format(new Date(this.props.dateWindowStart)),\r\n            start: this.props.dateWindowStart,\r\n            // end: new Intl.DateTimeFormat(\"en-US\").format(new Date(this.props.dateWindowStop))\r\n            end: this.props.dateWindowStop,\r\n            content: ''\r\n        }\r\n\r\n        // Set up points to display the checks\r\n        let travelChecksPoints = this.props.travelChecks.map((check, index) => { return {\r\n            id: this.props.travels.length + index + 2,\r\n            type: \"point\",\r\n            title: `${check['type']} ${check['location']} : ${check['date']}`,\r\n            content: `${check['location']} : ${check['date']}`,\r\n            start: check.date,\r\n            // group: check['type'] === 'DEP' ? 2 : 1\r\n            group: 3,\r\n            travelCheck: check\r\n        }})\r\n\r\n        //  Display the travel window limits\r\n        // travelChecksPoints = travelChecksPoints.concat(\r\n        //     [\r\n        //         new Object({\r\n        //             id: this.props.travels.length + travelChecksPoints.length + 2,\r\n        //             type: \"point\",\r\n        //             // start: new Intl.DateTimeFormat(\"en-US\").format(new Date(this.props.dateWindowStart)),\r\n        //             start: this.props.dateWindowStart,\r\n        //             group: 3\r\n        //         }),\r\n        //         new Object({\r\n        //             id: this.props.travels.length + travelChecksPoints.length + 3,\r\n        //             type: \"point\",\r\n        //             // start: new Intl.DateTimeFormat(\"en-US\").format(new Date(this.props.dateWindowStart)),\r\n        //             start: this.props.dateWindowStop,\r\n        //             group: 3\r\n        //         })\r\n        //     ]        \r\n        // )\r\n        return (\r\n        <Grid item xs={12}>\r\n            <AppBar position=\"static\">\r\n            <Toolbar>\r\n              <Typography variant=\"h6\" className={classes.title}>\r\n                <span role=\"img\" aria-label=\"tooltip-graph-title\">📊</span> Timeline\r\n              </Typography>\r\n            </Toolbar>\r\n            </AppBar>\r\n            <Timeline options={timelineOptions}\r\n                ref={this.timelineRef}\r\n                groups={timelineGroups}\r\n                items={this.props.travels.concat(travelChecksPoints).concat(timeWindowBackground)} />\r\n        </Grid>\r\n        )\r\n    }\r\n}\r\n\r\nexport { TravelsTimeline };","import React from 'react';\r\nimport { forwardRef } from 'react';\r\n\r\nimport AddBox from '@material-ui/icons/AddBox';\r\nimport DeleteOutline from '@material-ui/icons/DeleteOutline';\r\nimport ArrowDownward from '@material-ui/icons/ArrowDownward';\r\nimport Check from '@material-ui/icons/Check';\r\nimport ChevronLeft from '@material-ui/icons/ChevronLeft';\r\nimport ChevronRight from '@material-ui/icons/ChevronRight';\r\nimport Clear from '@material-ui/icons/Clear';\r\nimport Edit from '@material-ui/icons/Edit';\r\nimport FilterList from '@material-ui/icons/FilterList';\r\nimport FirstPage from '@material-ui/icons/FirstPage';\r\nimport LastPage from '@material-ui/icons/LastPage';\r\nimport Remove from '@material-ui/icons/Remove';\r\nimport SaveAlt from '@material-ui/icons/SaveAlt';\r\nimport Search from '@material-ui/icons/Search';\r\nimport ViewColumn from '@material-ui/icons/ViewColumn';\r\n\r\nconst tableIcons = {\r\n    Add: forwardRef((props, ref) => <AddBox {...props} ref={ref} />),\r\n    Check: forwardRef((props, ref) => <Check {...props} ref={ref} />),\r\n    Clear: forwardRef((props, ref) => <Clear {...props} ref={ref} />),\r\n    Delete: forwardRef((props, ref) => <DeleteOutline {...props} ref={ref} />),\r\n    DetailPanel: forwardRef((props, ref) => <ChevronRight {...props} ref={ref} />),\r\n    Edit: forwardRef((props, ref) => <Edit {...props} ref={ref} />),\r\n    Export: forwardRef((props, ref) => <SaveAlt {...props} ref={ref} />),\r\n    Filter: forwardRef((props, ref) => <FilterList {...props} ref={ref} />),\r\n    FirstPage: forwardRef((props, ref) => <FirstPage {...props} ref={ref} />),\r\n    LastPage: forwardRef((props, ref) => <LastPage {...props} ref={ref} />),\r\n    NextPage: forwardRef((props, ref) => <ChevronRight {...props} ref={ref} />),\r\n    PreviousPage: forwardRef((props, ref) => <ChevronLeft {...props} ref={ref} />),\r\n    ResetSearch: forwardRef((props, ref) => <Clear {...props} ref={ref} />),\r\n    Search: forwardRef((props, ref) => <Search {...props} ref={ref} />),\r\n    SortArrow: forwardRef((props, ref) => <ArrowDownward {...props} ref={ref} />),\r\n    ThirdStateCheck: forwardRef((props, ref) => <Remove {...props} ref={ref} />),\r\n    ViewColumn: forwardRef((props, ref) => <ViewColumn {...props} ref={ref} />)\r\n  };\r\n\r\nexport { tableIcons };","import React from 'react';\r\nimport { tableIcons } from './icons.js'\r\nimport Grid from '@material-ui/core/Grid';\r\nimport { makeStyles } from '@material-ui/styles';\r\nimport MaterialTable from 'material-table';\r\nimport Card from '@material-ui/core/Card';\r\n\r\nimport './travel_checks.css'\r\nimport { dateToDateString, exportXls } from './utils.js';\r\n\r\nimport './travel_checks.css'\r\n\r\nconst useStyles = makeStyles({\r\n    blueBackground: {\r\n        background: 'linear-gradient(45deg, #3f51b5 30%, #3f51b5 90%)',\r\n        border: 0,\r\n        borderRadius: 0,\r\n        boxShadow: '0 3px 5px 2px rgba(255, 105, 135, .3)',\r\n        color: 'white',\r\n        height: 48,\r\n        padding: '0 30px',\r\n        alignItems: 'center'\r\n    }\r\n  });\r\n\r\nexport function TravelChecksList(props) {\r\n        const classes = useStyles(props);\r\n        return (\r\n        <Grid item xs={12}>\r\n          <Card>\r\n            {/* <Toolbar className={classes.blueBackground}>\r\n                <Typography variant=\"h6\" className={classes.title}>\r\n                    Travel checks list\r\n                </Typography>\r\n            </Toolbar> */}\r\n            <MaterialTable\r\n                icons={tableIcons}\r\n                columns={[\r\n                        { title: 'Date', field: 'date', type: 'date',  filtering: false, render: (a) => dateToDateString(a.date) },\r\n                        { title: 'Location', field: 'location', filtering: false },\r\n                        { title: 'Type', field: 'type', lookup:{'DEP': 'Departure', 'ARR': 'Arrival'} }\r\n                    ]}\r\n                data={props.travelChecks}\r\n                title=\"🖋️ Travel checks list\"\r\n                style = {{classes}}\r\n                options={{\r\n                    search: false,\r\n                    exportButton: true,\r\n                    exportAllData: true,\r\n                    exportCsv: exportXls,\r\n                    localization: { exportName: 'Export as Excel File' },\r\n                    searchFieldStyle: {\r\n                      backgroundColor: '#01579b',\r\n                      color: '#FFF'\r\n                    },\r\n                    rowStyle: rowData => ( { backgroundColor: (rowData.tableData.id % 2) ? '#EEE' : '#FFF' } )\r\n                }}\r\n                editable={{\r\n                    onRowAdd: newData =>\r\n                        new Promise((resolve) => {\r\n                        setTimeout(() => {\r\n                                props.updateTravelChecks(props.travelChecks.concat(newData));\r\n                            resolve();\r\n                        }, 1000);\r\n                    }),\r\n                    onRowUpdate: (newData, oldData) =>\r\n                        new Promise((resolve) => {\r\n                        setTimeout(() => {\r\n                            {\r\n                                const newTravelChecks = props.travelChecks.concat();\r\n                                const index = newTravelChecks.indexOf(oldData);\r\n                                newTravelChecks[index] = newData;              \r\n                                props.updateTravelChecks(newTravelChecks);\r\n                            }\r\n                            resolve();\r\n                        }, 1000);\r\n                    }),\r\n                onRowDelete: oldData =>\r\n                    new Promise((resolve) => {\r\n                        setTimeout(() => {\r\n                            {\r\n                                let newTravelChecks = props.travelChecks.concat();\r\n                                const index = newTravelChecks.indexOf(oldData);\r\n                                newTravelChecks.splice(index, 1);\r\n                                props.updateTravelChecks(newTravelChecks);\r\n                            }\r\n                            resolve();\r\n                        }, 1000);\r\n                    })\r\n            }}/>\r\n            </Card>\r\n        </Grid>\r\n    )\r\n}","\r\nimport React from 'react';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Select from '@material-ui/core/Select';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Button from '@material-ui/core/Button';\r\nimport Grid from '@material-ui/core/Grid';\r\n\r\nexport class InputFormDialog extends React.PureComponent {\r\n    render() {\r\n        return (\r\n            <Dialog open={this.props.showModal} onClose={this.props.hideModalHandler} aria-labelledby=\"form-dialog-title\">\r\n            <DialogTitle id=\"form-dialog-title\">Import raw data</DialogTitle>\r\n            <DialogContent>\r\n            <Grid container>\r\n                <Grid item xs={12}>\r\n                    <Typography component=\"p\" color=\"textSecondary\">\r\n                        Copy and paste your travel data in the input field, select the corresponding import format and press Import.\r\n                        <br />\r\n                        Nothing about you or any travel history is collected and sent anywhere: privacy is guaranteed.\r\n                    </Typography>\r\n                </Grid>\r\n                <Grid item xs={8}>\r\n                    <TextField\r\n                        autoFocus\r\n                        margin=\"dense\"\r\n                        id=\"standard-multiline-flexible\"\r\n                        label=\"Paste input data here:\"\r\n                        multiline\r\n                        rows={10}\r\n                        fullWidth\r\n                        name='rawInput'\r\n                        size=\"small\"\r\n                        value={this.props.newRawInput}\r\n                        onChange={this.props.handleNewRawInput} />\r\n                </Grid>\r\n                <Grid item container xs={4}>\r\n                    <Grid item xs={12}>\r\n                        <Typography id=\"discrete-slider-small-steps\" gutterBottom>\r\n                            Select the import format:\r\n                        </Typography>\r\n                        <Select value={this.props.processingFunction} onChange={this.props.handleProcessingFunctionChange}>\r\n                            <MenuItem value='i94'>I94 website format</MenuItem>\r\n                            <MenuItem value='tabular'>Tabular copy paste format</MenuItem>\r\n                        </Select>\r\n                    </Grid>\r\n                    <Grid item>\r\n                    <Typography component=\"p\">\r\n                        {this.props.processingFunctionInfo}\r\n                    </Typography>\r\n                    </Grid>\r\n                    <Grid item>\r\n                        <Button onClick={ (e) => { this.props.hideModalHandler(); this.props.handleProcessNewRawInput(e); } }\r\n                            variant=\"contained\"\r\n                            color=\"primary\"\r\n                            size=\"large\">Import</Button>\r\n                    </Grid>\r\n                    </Grid>\r\n                </Grid>\r\n            </DialogContent>\r\n            <DialogActions>\r\n            </DialogActions>\r\n        </Dialog>\r\n        )\r\n    }\r\n}","import React from 'react';\r\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\r\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\r\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport Typography from '@material-ui/core/Typography'\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Button from '@material-ui/core/Button';\r\nimport moment from 'moment'\r\n\r\nimport { renderTravelCheck } from './result.js'\r\n\r\nexport function HowToUse(props) {\r\n    const [open, setOpen] = React.useState(false);\r\n    const [, setScroll] = React.useState('paper');\r\n  \r\n    const handleClickOpen = (scrollType) => () => {\r\n      setOpen(true);\r\n      setScroll(scrollType);\r\n    };\r\n  \r\n    const handleClose = () => {\r\n      setOpen(false);\r\n    };\r\n    return (\r\n    <Grid item xs={12}>\r\n        <ExpansionPanel>\r\n            <ExpansionPanelSummary\r\n            expandIcon={<ExpandMoreIcon />}\r\n            aria-controls=\"panel1a-content\"\r\n            id=\"panel1a-header\"\r\n            >\r\n            <Typography variant=\"h6\" color=\"primary\" >How to use ?</Typography>\r\n            </ExpansionPanelSummary>\r\n            <ExpansionPanelDetails>\r\n            <Typography  component=\"p\" color=\"textPrimary\">                \r\n                <span role=\"img\" aria-label=\"tooltip-pen\">🖋️</span> Import some I94 travel history data, or manually create some entries below.<br />\r\n                <span role=\"img\" aria-label=\"tooltip-calendar\">📅</span> Select a counting period<br />\r\n                <span role=\"img\" aria-label=\"tooltip-graph\">📊</span> Check your travel history using the timeline <br />\r\n                <span role=\"img\" aria-label=\"tooltip-calc\">🧮</span> Get the count of days from the results tab<br />\r\n                <br />\r\n                <Button size=\"small\"  color=\"primary\" variant=\"contained\" onClick={handleClickOpen('paper')}>\r\n                    More information\r\n                </Button>\r\n            </Typography>\r\n            </ExpansionPanelDetails>\r\n        </ExpansionPanel>\r\n        <InfoDialog handleClickOpen={handleClickOpen} handleClose={handleClose} open={open} />\r\n\r\n    </Grid>\r\n)}\r\n\r\n\r\n\r\nexport function InfoDialog(props) {\r\n    const descriptionElementRef = React.useRef(null);\r\n    React.useEffect(() => {\r\n      if (props.open) {\r\n        const { current: descriptionElement } = descriptionElementRef;\r\n        if (descriptionElement !== null) {\r\n          descriptionElement.focus();\r\n        }\r\n      }\r\n    }, [props.open]);\r\n  \r\n    return (\r\n      <div>\r\n        <Dialog\r\n          open={props.open}\r\n          onClose={props.handleClose}\r\n          scroll={props.scroll}\r\n          aria-labelledby=\"scroll-dialog-title\"\r\n          aria-describedby=\"scroll-dialog-description\"\r\n        >\r\n          <DialogTitle id=\"scroll-dialog-title\">Additional Information</DialogTitle>\r\n          <DialogContent dividers={props.scroll === 'paper'}>\r\n            <DialogContentText\r\n              id=\"scroll-dialog-description\"\r\n              ref={descriptionElementRef}\r\n              tabIndex={-1}\r\n            >\r\n                <Typography variant=\"h6\" color=\"textPrimary\">\r\n                    What is this?\r\n                </Typography>\r\n                <Typography variant=\"p\">\r\n                    This tool has been created to help US Non Residents to fill their paperwork:\r\n                    the US administration sometimes require a calculation of the total amount of days spent on US territory.\r\n                    This can be long and difficult to do, especially if you travel a lot.\r\n                    <br />\r\n                    <br />\r\n                    With this tool, you can directly copy and paste your travel history in the \"Import data\" tool to get a visualization\r\n                    of your travel history, as well as the calculations needed for your paperwork on a selected time period.\r\n                    <br />\r\n                    <br />\r\n                </Typography>\r\n                <Typography variant=\"h6\" color=\"textPrimary\">\r\n                    What about my privacy?\r\n                </Typography>\r\n                <Typography variant=\"p\">\r\n                    Just like a calculator, this tool is a standalone app: it doesn't send any information you fill in on the internet.\r\n                    <br />\r\n                    <br />\r\n                </Typography>\r\n              <Typography variant=\"h6\" color=\"textPrimary\">\r\n                How are days counted?\r\n              </Typography>\r\n                <Typography variant=\"p\">\r\n                In most cases the US immigration counts the travel days as days <b>inside the US</b>.\r\n                <br />\r\n                <br />\r\n                <b>Example:</b>\r\n                <br />\r\n                Let's say you want to count your travel days in <b>2017</b>. The only trip you had\r\n                was in Mexico on April 1st 2017, and you came back on April 5th 2017. <br /> <br />\r\n                This shows up in your I94 with the following travel checks: <br /> {\r\n                  renderTravelCheck({date: moment('2017-04-01'),\r\n                  location: 'MIA', type: 'DEP'})\r\n                }(Departure) and {\r\n                  renderTravelCheck({date: moment('2017-04-05'),\r\n                  location: 'MIA', type: 'ARR'})\r\n                } (Arrival)\r\n                <br /><br />\r\n                The total count of days outside the US in 2017 is 3 days: <b>you were traveling</b> for 2 days <b>and outside</b> the US for 3 days. \r\n                <br />\r\n                The total count of days inside the US in 2017 is 362 days: <b>you were traveling</b> for 2 days <b>and inside</b> the US during 360 days.\r\n                <br />\r\n                You may check your result with 3 + 362 = 365, there are 365 days in 2017.\r\n                <br />\r\n                <br />\r\n              </Typography>\r\n              <Typography variant=\"h6\" color=\"textPrimary\">\r\n                Something does not work!\r\n              </Typography>\r\n                <Typography variant=\"p\">\r\n                    You are more than welcome to report any issue on the <a href=\"https://github.com/mxm-tr/travel_history_parser\" rel=\"noopener noreferrer\" target=\"_blank\">github account of the app</a>.\r\n                <br />\r\n                </Typography>\r\n            </DialogContentText>\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button onClick={props.handleClose} color=\"primary\">\r\n              Close\r\n            </Button>\r\n          </DialogActions>\r\n        </Dialog>\r\n      </div>\r\n    );\r\n  }","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport moment from 'moment'\r\n\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport Alert from '@material-ui/lab/Alert';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Typography from '@material-ui/core/Typography'\r\nimport MuiThemeProvider from 'material-ui/styles/MuiThemeProvider';\r\nimport DeleteOutline from '@material-ui/icons/DeleteOutline';\r\nimport AddBox from '@material-ui/icons/AddBox';\r\n\r\nimport './index.css';\r\n\r\nimport { DateWindow } from './date_window.js'\r\nimport { TravelsTimeline } from './timeline.js'\r\nimport { TravelChecksList } from './travel_checks.js'\r\nimport { InputFormDialog } from './input_form_dialog.js'\r\nimport { sortTravelChecks, processRawInput, computeTravelDurationDays, sumTravelDaysInside, travelChecksToTravelsList } from './utils.js';\r\nimport { Result, ParsingErrors } from './result.js'\r\nimport { HowToUse } from './tooltips.js';\r\n\r\nconst processingFunctionInfos={\r\n    \"i94\": <span> Copy and paste data from the table on the\r\n            <a href=\"https://i94.cbp.dhs.gov/I94/#/history-search\" target=\"_blank\" rel=\"noopener noreferrer\"> official i94 website </a>\r\n        </span>,\r\n    \"tabular\": <span> Copy and paste data from a CSV table you have exported using this tool </span>\r\n}\r\n\r\nclass App extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            showModal : false,\r\n            newTravelChecksCount: 0,\r\n            showImportingDataMessage: false,\r\n            showClearAllDialog: false,\r\n            showDataImportedMessage: false,\r\n            showNoDataImportedMessage: false,\r\n            travelChecks: [],\r\n            // travelChecks: [{\r\n            //     \"location\": \"RRA\",\r\n            //     \"type\": \"ARR\",\r\n            //     \"date\": \"2017-03-30\",\r\n            // },\r\n            // {\r\n            //     \"location\": \"BWI\",\r\n            //     \"type\": \"DEP\",\r\n            //     \"date\": \"2017-03-31\",\r\n            // },\r\n            // {\r\n            //     \"location\": \"DLA\",\r\n            //     \"type\": \"ARR\",\r\n            //     \"date\": \"2017-05-30\",\r\n            // },\r\n            // {\r\n            //     \"location\": \"DUL\",\r\n            //     \"type\": \"DEP\",\r\n            //     \"date\": \"2017-06-30\",\r\n            // }],\r\n            newRawInput: 'poop',\r\n            processingFunction: 'i94',\r\n            dateWindowStart: new moment(),\r\n            dateWindowStop: new moment(),\r\n        };\r\n        this.handleNewRawInput = this.handleNewRawInput.bind(this);\r\n        this.handleProcessingFunctionChange = this.handleProcessingFunctionChange.bind(this);\r\n        this.handleProcessNewRawInput = this.handleProcessNewRawInput.bind(this);\r\n        this.updateTravelChecks = this.updateTravelChecks.bind(this);\r\n        this.handleWindowStartChange = this.handleWindowStartChange.bind(this);\r\n        this.handleWindowStopChange = this.handleWindowStopChange.bind(this);\r\n        this.fitDateWindow = this.fitDateWindow.bind(this);\r\n    }\r\n\r\n    handleProcessingFunctionChange(event) {\r\n        this.setState({processingFunction: event.target.value});\r\n    }\r\n\r\n    handleNewRawInput(event) {\r\n        this.setState({newRawInput: event.target.value});\r\n    }\r\n\r\n    handleProcessNewRawInput(event){\r\n        this.setState({showImportingDataMessage:true})\r\n        const newTravelChecks = processRawInput(this.state.newRawInput, this.state.processingFunction)\r\n        if (newTravelChecks.length > 0){\r\n            this.setState({\r\n                newTravelChecksCount: newTravelChecks.length,\r\n                showDataImportedMessage: true\r\n            });\r\n        }else{\r\n            this.setState({showNoDataImportedMessage:true});\r\n        }\r\n        this.updateTravelChecks(this.state.travelChecks.concat(newTravelChecks))\r\n        event.preventDefault();\r\n    }\r\n\r\n    fitDateWindow(){\r\n        this.setState({\r\n            dateWindowStart: this.state.travelChecks[0].date,\r\n            dateWindowStop: this.state.travelChecks[this.state.travelChecks.length - 1].date\r\n        })\r\n    }\r\n\r\n    handleWindowStartChange(newD){\r\n        this.setState({dateWindowStart: newD === null ? this.state.travelChecks[0].date : newD })\r\n        this.updateTravels()\r\n    }\r\n    handleWindowStopChange(newD){\r\n        this.setState({dateWindowStop: newD === null ? this.state.travelChecks[this.state.travelChecks.length - 1].date : newD })\r\n        this.updateTravels()\r\n    }\r\n\r\n    updateTravelChecks(newTravelChecks){\r\n        // Updates the travel checks list, and the date window pickers' defaults values\r\n        if (newTravelChecks.length < 1){\r\n            return\r\n        }\r\n        \r\n        const newTravelChecksSorted = sortTravelChecks(newTravelChecks)\r\n        this.setState(\r\n                {\r\n                    dateWindowStart: newTravelChecksSorted[0].date,\r\n                    dateWindowStop: newTravelChecksSorted[newTravelChecksSorted.length - 1].date,\r\n                    travelChecks: newTravelChecksSorted\r\n                }\r\n            )\r\n    }\r\n    computeTravelsWithMessage(){\r\n       return travelChecksToTravelsList(this.state.travelChecks, this.state.dateWindowStart, this.state.dateWindowStop)\r\n    }\r\n    computeTravels(){\r\n        return this.computeTravelsWithMessage()['travels']\r\n    }\r\n    computeTravelsMessage(){\r\n        return this.computeTravelsWithMessage()['errors']\r\n    }\r\n    updateTravels(){\r\n        const travelsComputeResult = this.computeTravelsWithMessage()\r\n        this.setState(\r\n            {\r\n                travels: travelsComputeResult['travels'],\r\n                travelsParserErrors: travelsComputeResult['errors']\r\n            }\r\n        )\r\n    }\r\n\r\n    showModalHandler = () =>{\r\n        this.setState({showModal:true});\r\n    }\r\n    hideModalHandler = () =>{\r\n        this.setState({showModal:false});\r\n    }\r\n    componentDidMount() {\r\n        window.addEventListener('beforeunload', this.handleLeavePage);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        window.removeEventListener('beforeunload', this.handleLeavePage);\r\n    }\r\n    handleLeavePage(e) {\r\n        const confirmationMessage = 'Do you want to leave this page? You will lose all current data.';\r\n        e.returnValue = confirmationMessage;     // Gecko, Trident, Chrome 34+\r\n        return confirmationMessage;              // Gecko, WebKit, Chrome <34\r\n    }\r\n    render() {\r\n      return (\r\n        <MuiThemeProvider>\r\n        <Grid container justify=\"center\" alignItems=\"center\" >\r\n            <Snackbar open={this.state.showImportingDataMessage} onClose={ () => this.setState({showImportingDataMessage:false}) } autoHideDuration={2000} >\r\n                <Alert color='info'>Importing Data</Alert>\r\n            </Snackbar>\r\n            <Snackbar open={this.state.showDataImportedMessage} onClose={ () => this.setState({showDataImportedMessage:false}) } autoHideDuration={2000} >\r\n                <Alert color='success'>{this.state.newTravelChecksCount} new lines imported !</Alert>\r\n            </Snackbar>\r\n            <Snackbar open={this.state.showNoDataImportedMessage} onClose={ () => this.setState({showNoDataImportedMessage:false}) } autoHideDuration={5000} >\r\n                <Alert color='error'>No data imported, check your input and make sure you selected the right processing function.</Alert>\r\n            </Snackbar>\r\n\r\n            <Dialog onClose={() => this.setState({showClearAllDialog: false})} aria-labelledby=\"simple-dialog-title\" open={this.state.showClearAllDialog}>\r\n            <DialogTitle id=\"simple-dialog-title\">Clear all data</DialogTitle>\r\n            <DialogActions>\r\n            <Button onClick={() => this.setState({travelChecks: [], travels: [], showClearAllDialog: false})} color=\"primary\">\r\n                Delete all\r\n            </Button>\r\n            <Button onClick={() => this.setState({showClearAllDialog: false})} color=\"primary\" autoFocus>\r\n                Cancel\r\n            </Button>\r\n            </DialogActions>\r\n            </Dialog>\r\n            <InputFormDialog\r\n                showModal={this.state.showModal}\r\n                hideModalHandler={this.hideModalHandler}\r\n                handleNewRawInput={this.handleNewRawInput}\r\n                handleProcessNewRawInput={this.handleProcessNewRawInput}\r\n                processingFunction={this.state.processingFunction}\r\n                processingFunctionInfo={processingFunctionInfos[this.state.processingFunction]}\r\n                handleProcessingFunctionChange={this.handleProcessingFunctionChange} />\r\n            \r\n            <Grid container item xs={11} spacing={3} direction=\"row\" alignItems=\"center\" justify=\"center\" style={{marginTop: 10, marginBottom: 10}}>\r\n            \r\n            <Grid container item spacing={3} justify=\"center\" alignItems=\"flex-start\">\r\n                <Grid container item xs={7} direction=\"column\" spacing={2}>\r\n                    <Grid item xs={12}>\r\n                        <Typography  component=\"h4\" variant=\"h5\" color=\"inherit\" noWrap>\r\n                            <span role=\"img\" aria-label=\"airplane\">✈️</span> US Travel History Calculator\r\n                        </Typography>\r\n                    </Grid>\r\n                    <HowToUse />\r\n                    <TravelChecksList travelChecks={ this.state.travelChecks } updateTravelChecks={this.updateTravelChecks} />\r\n                    <ParsingErrors errors={this.computeTravelsMessage()} />\r\n                </Grid>\r\n                <Grid container item xs={5} direction=\"column\" spacing={2}>\r\n                    <Grid item container xs={12} justify=\"space-between\" alignItems=\"center\">\r\n                        <Grid item>\r\n                            <Button\r\n                                    onClick={this.showModalHandler}\r\n                                    variant=\"contained\"\r\n                                    color=\"primary\"\r\n                                    size=\"large\"\r\n                                    startIcon={<AddBox />}>\r\n                                        Import Data\r\n                                </Button>\r\n                        </Grid>\r\n                        <Grid item>\r\n                            <Button \r\n                                onClick={() => this.setState({showClearAllDialog: true})}\r\n                                variant=\"contained\"\r\n                                color=\"secondary\"\r\n                                size=\"large\"\r\n                                startIcon={<DeleteOutline />}>\r\n                                    Clear All Data\r\n                            </Button>\r\n                        </Grid>\r\n                    </Grid>\r\n                    <DateWindow\r\n                        dateWindowStart={this.state.dateWindowStart}\r\n                        dateWindowStop={this.state.dateWindowStop}\r\n                        handleWindowStartChange={ this.handleWindowStartChange }\r\n                        handleWindowStopChange={ this.handleWindowStopChange } \r\n                        fitDateWindow = { this.fitDateWindow }/>\r\n                    <Result\r\n                        dateWindowStart={this.state.dateWindowStart}\r\n                        dateWindowStop={this.state.dateWindowStop}\r\n                        totalDaysInside={sumTravelDaysInside(this.computeTravels())}\r\n                        totalDaysOutside={computeTravelDurationDays(this.state.dateWindowStart, this.state.dateWindowStop) - sumTravelDaysInside(this.computeTravels())}\r\n                        totalDaysWindow={computeTravelDurationDays(this.state.dateWindowStart, this.state.dateWindowStop)}\r\n                        errors={ this.computeTravelsMessage() } />\r\n                </Grid>\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n                <TravelsTimeline travels={this.computeTravels()}\r\n                        travelChecks={this.state.travelChecks}\r\n                        dateWindowStart={this.state.dateWindowStart}\r\n                        dateWindowStop={this.state.dateWindowStop}\r\n                />\r\n            </Grid>\r\n        </Grid>\r\n    </Grid>\r\n    </MuiThemeProvider>\r\n    );\r\n    }\r\n  }\r\n  \r\n  \r\n// ========================================\r\n\r\nReactDOM.render(\r\n    <div>\r\n        <App name=\"Travel checks list\"/>\r\n    </div>,\r\n    document.getElementById('root')\r\n  );"],"sourceRoot":""}